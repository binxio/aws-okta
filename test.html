<html>

<head>
    <title>Role selection</title>
</head>

<body>
    <h1>This is a heading</h1>
    <p>This is a paragraph.</p>
    <button type="button" onclick="displayRadioValue()">
        Submit
    </button>
    <div id="result"></div>

    <script>
        const { ipcRenderer } = require("electron")

        ipcRenderer.on("incoming-roles", function (event, data) {
            console.log("received data", JSON.stringify(data))
            var roles = data

            // create a new div element 
            var rootDiv = document.createElement("fieldset");
            console.log('entered addElement function')
            for (let role in roles) {
                console.log('loop' + roles[role].value)
                var newDiv = document.createElement("div");
                var radio = document.createElement("INPUT");
                radio.setAttribute("type", "radio");
                radio.setAttribute("name", "test");
                radio.setAttribute("id", roles[role].value)
                newDiv.setAttribute("name", "rolearn")


                // and give it some content 
                var newContent = document.createTextNode(roles[role].name);
                // add the text node to the newly created div
                newDiv.appendChild(radio)
                newDiv.appendChild(newContent);

                rootDiv.appendChild(newDiv);
            }
            document.body.append(rootDiv)
        });

        function displayRadioValue() {

            var ele = document.getElementsByName('test');
            console.log(ele)
            for (i = 0; i < ele.length; i++) {
                if (ele[i].checked)
                    document.getElementById("result").innerHTML
                        = "Selected role: " + ele[i].id;
            }
        }

    </script>


</body>

</html>