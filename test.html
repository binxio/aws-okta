<html lang="">

<head>
    <title>Role selection</title>
</head>

<body>
    <h1>This is a heading</h1>
    <p>This is a paragraph.</p>
    <div id="result"></div>

    <script>
        const { ipcRenderer } = require("electron")

        ipcRenderer.on("incoming-roles", function (event, data) {
            const roles = data

            // create a new div element 
            const rootDiv = document.createElement("fieldset");
            for (let role in roles) {
                const newDiv = document.createElement("div");
                const radio = document.createElement("INPUT");
                radio.setAttribute("type", "radio");
                radio.setAttribute("name", "test");
                radio.setAttribute("id", roles[role].value)
                newDiv.setAttribute("name", "rolearn")


                // and give it some content 
                const newContent = document.createTextNode(roles[role].name);
                // add the text node to the newly created div
                newDiv.appendChild(radio)
                newDiv.appendChild(newContent);

                rootDiv.appendChild(newDiv);
            }
            document.body.append(rootDiv)
        });

        function displayRadioValue() {
            let list = document.getElementsByName('test');
            list.forEach(role => {
                if (role.checked) {
                    document.getElementById("result").innerHTML
                        = "Selected role: " + role.id;
                    ipcRenderer.send('selectedRole', role.id)
                }
            })
        }


    </script>

    <button type="button" onclick="sendRoleSelection()">
        Submit
    </button>

</body>

</html>